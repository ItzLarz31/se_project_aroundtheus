!function(){"use strict";class e{constructor(e,t,s,r,i){let{name:n,link:o,_id:a,isLiked:l}=e;this._name=n,this._link=o,this.id=a,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteConfirmation=r,this._handleLikeCard=i,this.isLiked=l}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeCard(this)})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteConfirmation(this)})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleLikeButton(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_handleDeleteButton(){this._handleDeletePopup.open(this.id)}deleteCard(){this._cardElement.remove(),this._cardElement=null}updateLikes(e){this.isLiked=e,this._handleLikeButton()}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._handleLikeButton(),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._formElement=t,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._borderErrorClass=e.borderErrorClass,this._setEventListeners()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._formElement.addEventListener("submit",(e=>{e.preventDefault()}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._borderErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass),t.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._borderErrorClass),t.textContent="",t.classList.remove(this._errorClass),t.classList.remove(this._inputErrorClass)}_toggleButtonState(e,t){this._hasInvalidInput(e)?this.disableButton(t):this._enableButton(t)}_hasInvalidInput(e){return[...this._inputElements].some((e=>!e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(),this._toggleButtonState()}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}class r extends s{constructor(e,t,s){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._defaultSubmitButtonText=s,this._submitButton=this._popupForm.querySelector(".modal__save")}_getInputValues(){const e={};return this._inputList=this._popupForm.querySelectorAll(".modal__input"),this._inputList.forEach((t=>{e[t.name]=t.value})),e}renderLoading(e){this._submitButton.textContent=e?"Saving...":this._defaultSubmitButtonText}reset(){this._popupForm.reset()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}class i{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}const n={formSelector:".modal__container",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",borderErrorClass:"modal__input_border_error"},o=document.querySelector(".content").querySelector(".profile__edit-button"),a=(document.querySelector(".cards__list"),document.querySelector("#edit-modal")),l=a.querySelector(".modal__form"),d=a.querySelector("#profile-title-input"),c=a.querySelector("#profile-description-input"),u=document.querySelector("#profile-avatar-modal").querySelector(".modal__form"),h=document.querySelector(".profile__edit-picture-button"),_=(document.querySelector(".cards__list"),document.querySelector("#card-modal").querySelector(".modal__form")),m=document.querySelector(".profile__add-button"),p=new t(n,_);p.enableValidation();const E=new t(n,l);E.enableValidation();const v=new t(n,u);v.enableValidation();const b=new r("#card-modal",(function(e){let{title:t,url:s}=e;b.renderLoading(!0),g.addCard({name:t,link:s}).then((e=>{B(e),b.close(),b.reset(),p.disableButton()})).catch((e=>{console.error("Error adding card:",e)})).finally((()=>{b.renderLoading(!1)}))}),"Create");b.setEventListeners();const S=new class extends s{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupTitle=this._popupElement.querySelector(".modal__image-name")}open(e){let{link:t,name:s}=e;this._popupImage.src=t,this._popupTitle.textContent=s,this._popupImage.alt=s,super.open()}}("#image-modal");S.setEventListeners();const f=new r("#edit-modal",(function(e){let{name:t,description:s}=e;f.renderLoading(!0),g.updateProfileInfo({title:t,description:s}).then((()=>{C.setUserInfo({name:t,description:s}),E.disableButton(),f.close()})).catch((e=>{console.error("Error updating profile:",e)})).finally((()=>{f.renderLoading(!1)}))}),"Save");f.setEventListeners();const L=new r("#profile-avatar-modal",(function(e){L.renderLoading(!0);const t=e.url;g.updateAvatar({avatar:t}).then((()=>{C.setAvatarImage({avatar:t}),v.disableButton(),L.close(),L.reset()})).catch((e=>{console.error("Error updating avatar:",e)})).finally((()=>{L.renderLoading(!1)}))}),"Save");L.setEventListeners();const k=new class extends s{constructor(e){super({popupSelector:e}),this._submitButton=this._popupElement.querySelector(".modal__save"),this._handleSubmitCallback=null}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){super.setEventListeners(),this._submitButton.addEventListener("click",(()=>{this._handleSubmitCallback()}))}}("#confirm-modal");k.setEventListeners();const C=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:r}=e;this._name=document.querySelector(t),this._job=document.querySelector(s),this._profileAvatar=document.querySelector(r)}getUserInfo(){return this._userData={name:this._name.textContent,description:this._job.textContent},this._userData}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._job.textContent=s}setAvatarImage(e){let{avatar:t}=e;this._profileAvatar.src=t}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:".profile__avatar"});document.getElementById("profile-image").src="106962b8f339c0d473bf.jpg";const g=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this.checkResponse)}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers})}getProfileInfo(){return this._request(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers})}updateProfileInfo(e){let{title:t,description:s}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})})}addCard(e){let{name:t,link:s}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}likeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}dislikeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}updateAvatar(e){let{avatar:t}=e;return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"f280bef9-8cb1-42f0-967f-b248aa62ce9e","Content-Type":"application/json"}});let y;function q(e,t){S.open({link:t,name:e})}function B(t){const s=new e(t,"#card-template",q,I,w).getView();y.addItem(s)}function I(e){k.open(),k.setSubmitAction((()=>{g.deleteCard(e.id).then((()=>{e.deleteCard(),k.close()})).catch((e=>{console.error("Error deleting card",e)}))}))}function w(e){e.isLiked?g.dislikeCard(e.id).then((()=>{e.updateLikes(!1)})).catch((e=>{console.error("Error disliking card",e)})):g.likeCard(e.id).then((()=>{e.updateLikes(!0)})).catch((e=>{console.error("Error liking card",e)}))}g.getInitialCards().then((e=>{y=new i({items:e,renderer:B},".cards__list"),y.renderItems()})).catch((e=>{console.error(e)})),g.getProfileInfo().then((e=>{C.setUserInfo({name:e.name,description:e.about}),C.setAvatarImage({avatar:e.avatar})})).catch((e=>{console.error(e)})),o.addEventListener("click",(()=>{f.open(),E.resetValidation();const{name:e,description:t}=C.getUserInfo();d.value=e,c.value=t})),m.addEventListener("click",(()=>{b.open(),p.resetValidation()})),h.addEventListener("click",(()=>{L.open(),v.resetValidation()})),k.setSubmitAction((e=>{handleDeleteConfirmation(e)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUrQixHQUVaLGdCQUVGeUQsRUFBWXBGLGFBQWEsSUFFMUI0QixPQUFPOEQsSUFDTjVELFFBQVFELE1BQU02RCxFQUFJLElBR3RCbkUsRUFDR21ELGlCQUNBakQsTUFBTWtFLElBQ0xyRCxFQUFTQyxZQUFZLENBQ25CcEosS0FBTXdNLEVBQVN4TSxLQUNmaUosWUFBYXVELEVBQVNiLFFBRXhCeEMsRUFBU00sZUFBZSxDQUFFRCxPQUFRZ0QsRUFBU2hELFFBQVMsSUFFckRmLE9BQU84RCxJQUNONUQsUUFBUUQsTUFBTTZELEVBQUksSUF1SHRCbkYsRUFBa0J0RyxpQkFBaUIsU0FBUyxLQUMxQ2tJLEVBQWdCekgsT0FDaEJ1RyxFQUF5QmxELGtCQUN6QixNQUFNLEtBQUU1RSxFQUFJLFlBQUVpSixHQUFnQkUsRUFBU2dCLGNBQ3ZDNUMsRUFBaUJyQixNQUFRbEcsRUFDekJ3SCxFQUF3QnRCLE1BQVErQyxDQUFXLElBSTdDckIsRUFBYzlHLGlCQUFpQixTQUFTLEtBQ3RDa0gsRUFBYXpHLE9BQ2JzRyxFQUFxQmpELGlCQUFpQixJQUl4QzhDLEVBQWlCNUcsaUJBQWlCLFNBQVMsS0FDekN1SSxFQUFlOUgsT0FDZndHLEVBQXdCbkQsaUJBQWlCLElBSTNDOEUsRUFBZ0JFLGlCQUFpQmdDLElBQy9COUwseUJBQXlCOEwsRUFBTyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHsgbmFtZSwgbGluaywgX2lkLCBpc0xpa2VkIH0sXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uLFxuICAgIGhhbmRsZUxpa2VDYXJkXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuaWQgPSBfaWQ7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm1hdGlvbiA9IGhhbmRsZURlbGV0ZUNvbmZpcm1hdGlvbjtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZCA9IGhhbmRsZUxpa2VDYXJkO1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9cIi5jYXJkX19saWtlLWJ1dHRvblwiXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQodGhpcyk7XG4gICAgfSk7XG5cbiAgICAvL1wiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uKHRoaXMpO1xuICAgIH0pO1xuXG4gICAgLy9zZXR0aW5nIGV2ZW50IGxpc3RlbmVyIG9uIGNhcmQgaW1hZ2VcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlUG9wdXAub3Blbih0aGlzLmlkKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgdXBkYXRlTGlrZXMoaXNMaWtlZCkge1xuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9ib3JkZXJFcnJvckNsYXNzID0gY29uZmlnLmJvcmRlckVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpLFxuICAgIF07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcblxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2JvcmRlckVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2JvcmRlckVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRzLCBzdWJtaXRCdXR0b24pIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0RWxlbWVudHMpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oc3VibWl0QnV0dG9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKHN1Ym1pdEJ1dHRvbik7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gWy4uLnRoaXMuX2lucHV0RWxlbWVudHNdLnNvbWUoXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIGRlZmF1bHRTdWJtaXRCdXR0b25UZXh0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2RlZmF1bHRTdWJtaXRCdXR0b25UZXh0ID0gZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQ7XG4gICAgfVxuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGNhcmREYXRhID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgdmFsaWRhdG9yQ29uZmlncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fY29udGFpbmVyXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmVcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICBib3JkZXJFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9ib3JkZXJfZXJyb3JcIixcbn07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgcHJvZmlsZVNyYyBmcm9tIFwiLi4vaW1hZ2VzL2phY3F1ZXMtY291c3RlYXUuanBnXCI7XG5pbXBvcnQgeyB2YWxpZGF0b3JDb25maWdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgY2FyZERhdGEgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuLy8gQ29udGVudFxuY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudFwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgY2FyZHNXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuLy9Qcm9maWxlIE1vZGFsXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsTmFtZSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsRGVzY3JpcHRpb24gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuLy9BdmF0YXJcbmNvbnN0IGF2YXRhckVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hdmF0YXItbW9kYWxcIik7XG5jb25zdCBhdmF0YXJFZGl0Rm9ybSA9IGF2YXRhckVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2VkaXQtcGljdHVyZS1idXR0b25cIlxuKTtcblxuLy8gQ2FyZHNcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyBDYXJkIE1vZGFsXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtbW9kYWxcIik7XG5jb25zdCBjYXJkRWRpdEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdG9yQ29uZmlncywgY2FyZEVkaXRGb3JtKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRvckNvbmZpZ3MsXG4gIHByb2ZpbGVFZGl0Rm9ybVxuKTtcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIHZhbGlkYXRvckNvbmZpZ3MsXG4gIGF2YXRhckVkaXRGb3JtXG4pO1xuZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVDYXJkRm9ybVN1Ym1pdCxcbiAgXCJDcmVhdGVcIlxuKTtcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLW1vZGFsXCIpO1xubmV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbiAgXCJTYXZlXCJcbik7XG5uZXdQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3QXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1hdmF0YXItbW9kYWxcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbiAgXCJTYXZlXCJcbik7XG5uZXdBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBuZXdQb3B1cENvbmZpcm0gPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNjb25maXJtLW1vZGFsXCIpO1xubmV3UG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcbiAgYXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufSk7XG5cbmNvbnN0IHByb2ZpbGVJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZmlsZS1pbWFnZVwiKTtcbnByb2ZpbGVJbWFnZS5zcmMgPSBwcm9maWxlU3JjO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIEFQSSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImYyODBiZWY5LThjYjEtNDJmMC05NjdmLWIyNDhhYTYyY2U5ZVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmxldCBjYXJkU2VjdGlvbjtcbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGNhcmREYXRhKSA9PiB7XG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICAgIHtcbiAgICAgICAgaXRlbXM6IGNhcmREYXRhLFxuICAgICAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcbiAgICAgIH0sXG4gICAgICBcIi5jYXJkc19fbGlzdFwiXG4gICAgKTtcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbmFwaVxuICAuZ2V0UHJvZmlsZUluZm8oKVxuICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmFib3V0LFxuICAgIH0pO1xuICAgIHVzZXJJbmZvLnNldEF2YXRhckltYWdlKHsgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgbmV3SW1hZ2VQb3B1cC5vcGVuKHsgbGluaywgbmFtZSB9KTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZXRWaWV3KCk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XG4gIG5ld1BvcHVwQ29uZmlybS5vcGVuKCk7XG4gIG5ld1BvcHVwQ29uZmlybS5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZC5pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgIG5ld1BvcHVwQ29uZmlybS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkZWxldGluZyBjYXJkXCIsIGVycik7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkKSB7XG4gIGlmICghY2FyZC5pc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAubGlrZUNhcmQoY2FyZC5pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC51cGRhdGVMaWtlcyh0cnVlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbGlraW5nIGNhcmRcIiwgZXJyKTtcbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFwaVxuICAgICAgLmRpc2xpa2VDYXJkKGNhcmQuaWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudXBkYXRlTGlrZXMoZmFsc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkaXNsaWtpbmcgY2FyZFwiLCBlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XG4gIG5ld1Byb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZUluZm8oeyB0aXRsZTogbmFtZSwgZGVzY3JpcHRpb24gfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pO1xuICAgICAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgICAgIG5ld1Byb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHByb2ZpbGU6XCIsIGVycm9yKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIG5ld1Byb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoeyB0aXRsZSwgdXJsIH0pIHtcbiAgbmV3Q2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC5hZGRDYXJkKHsgbmFtZTogdGl0bGUsIGxpbms6IHVybCB9KVxuICAgIC50aGVuKChuZXdDYXJkRGF0YSkgPT4ge1xuICAgICAgcmVuZGVyQ2FyZChuZXdDYXJkRGF0YSk7XG4gICAgICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgIG5ld0NhcmRQb3B1cC5yZXNldCgpO1xuICAgICAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFkZGluZyBjYXJkOlwiLCBlcnJvcik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZGF0YSkge1xuICBuZXdBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBjb25zdCB1cmwgPSBkYXRhLnVybDtcbiAgYXBpXG4gICAgLnVwZGF0ZUF2YXRhcih7IGF2YXRhcjogdXJsIH0pXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0QXZhdGFySW1hZ2UoeyBhdmF0YXI6IHVybCB9KTtcbiAgICAgIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbiAgICAgIG5ld0F2YXRhclBvcHVwLmNsb3NlKCk7XG4gICAgICBuZXdBdmF0YXJQb3B1cC5yZXNldCgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGF2YXRhcjpcIiwgZXJyb3IpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgbmV3QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFdmVudCBMaXN0ZW5lcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIFByb2ZpbGUgRWRpdCBCdXR0b25cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld1Byb2ZpbGVQb3B1cC5vcGVuKCk7XG4gIGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZU1vZGFsTmFtZS52YWx1ZSA9IG5hbWU7XG4gIHByb2ZpbGVNb2RhbERlc2NyaXB0aW9uLnZhbHVlID0gZGVzY3JpcHRpb247XG59KTtcblxuLy8gQ2FyZCBBZGQgQnV0dG9uXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbi8vIEF2YXRhciBFZGl0IEJ1dHRvblxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBuZXdBdmF0YXJQb3B1cC5vcGVuKCk7XG4gIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbi8vRGVsZXRlIGNhcmQgYnV0dG9uXG5uZXdQb3B1cENvbmZpcm0uc2V0U3VibWl0QWN0aW9uKChjYXJkSWQpID0+IHtcbiAgaGFuZGxlRGVsZXRlQ29uZmlybWF0aW9uKGNhcmRJZCk7XG59KTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtbmFtZVwiKTtcbiAgfVxuXG4gIG9wZW4oeyBsaW5rLCBuYW1lIH0pIHtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBudWxsO1xuICB9XG5cbiAgc2V0U3VibWl0QWN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjaygpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgc2V0QXZhdGFySW1hZ2UoeyBhdmF0YXIgfSkge1xuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIGNoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9XG4gIH1cblxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0UHJvZmlsZUluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZUluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB0aXRsZSxcbiAgICAgICAgYWJvdXQ6IGRlc2NyaXB0aW9uLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNvbmZpcm1hdGlvbiIsImhhbmRsZUxpa2VDYXJkIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJpZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDb25maXJtYXRpb24iLCJfaGFuZGxlTGlrZUNhcmQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZUVsIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZVBvcHVwIiwib3BlbiIsImRlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJ1cGRhdGVMaWtlcyIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfYm9yZGVyRXJyb3JDbGFzcyIsImJvcmRlckVycm9yQ2xhc3MiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0RWxlbWVudHMiLCJzdWJtaXRCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsIl9lbmFibGVCdXR0b24iLCJpbnB1dExpc3QiLCJzb21lIiwiZGlzYWJsZWQiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsImRlZmF1bHRTdWJtaXRCdXR0b25UZXh0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZGVmYXVsdFN1Ym1pdEJ1dHRvblRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsIl9pbnB1dExpc3QiLCJpbnB1dCIsInZhbHVlIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJ2YWxpZGF0b3JDb25maWdzIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwicHJvZmlsZU1vZGFsTmFtZSIsInByb2ZpbGVNb2RhbERlc2NyaXB0aW9uIiwiYXZhdGFyRWRpdEZvcm0iLCJhdmF0YXJFZGl0QnV0dG9uIiwiY2FyZEVkaXRGb3JtIiwiY2FyZEFkZEJ1dHRvbiIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkUG9wdXAiLCJfcmVmMiIsInRpdGxlIiwidXJsIiwiYXBpIiwiYWRkQ2FyZCIsInRoZW4iLCJuZXdDYXJkRGF0YSIsInJlbmRlckNhcmQiLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImZpbmFsbHkiLCJuZXdJbWFnZVBvcHVwIiwiX3BvcHVwSW1hZ2UiLCJfcG9wdXBUaXRsZSIsIm5ld1Byb2ZpbGVQb3B1cCIsImRlc2NyaXB0aW9uIiwidXBkYXRlUHJvZmlsZUluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwibmV3QXZhdGFyUG9wdXAiLCJkYXRhIiwidXBkYXRlQXZhdGFyIiwiYXZhdGFyIiwic2V0QXZhdGFySW1hZ2UiLCJuZXdQb3B1cENvbmZpcm0iLCJfaGFuZGxlU3VibWl0Q2FsbGJhY2siLCJzZXRTdWJtaXRBY3Rpb24iLCJjYWxsYmFjayIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfam9iIiwiX3Byb2ZpbGVBdmF0YXIiLCJnZXRVc2VySW5mbyIsIl91c2VyRGF0YSIsIl9yZWYzIiwiZ2V0RWxlbWVudEJ5SWQiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJjaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIl9yZXF1ZXN0Iiwib3B0aW9ucyIsImZldGNoIiwiZ2V0SW5pdGlhbENhcmRzIiwibWV0aG9kIiwiZ2V0UHJvZmlsZUluZm8iLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiY2FyZElkIiwibGlrZUNhcmQiLCJkaXNsaWtlQ2FyZCIsIl9yZWY0IiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiY2FyZCIsImVyciIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==